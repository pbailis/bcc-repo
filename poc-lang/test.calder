DECLARE TABLE warehouse
NUMBER id UNIQUE
STRING name
END TABLE

DECLARE TABLE stock
NUMBER wid > 0
NUMBER count
END TABLE

BEGIN PROCEDURE neworder
PARAMETER inccount NUMERIC
var curstock = SELECT stock FROM warehouse WHERE blah = foo;
UPDATE warehouse INCREMENT stock BY ocount WHERE did = district;
if curstock < 30:
   UPDATE warehouse DECREMENT stock BY ocount WHERE did = district;
else:
   UPDATE warehouse INCREMENT stock BY curstock-ocount WHERE did = district;
UPDATE warehouse INCREMENT stock BY 500 WHERE did = district;
END PROCEDURE
